# Taller: FinOps y Arquitectura de Datos con AWS Pricing Calculator

**Tema:** Estimación de costos para Data Lakes (Glue + Athena)  
**Herramienta:** [AWS Pricing Calculator](https://calculator.aws/)

---

## 1. Descripción del Escenario

Usted es el **Ingeniero de Datos Principal** en una empresa de transporte. La empresa posee un dataset histórico de viajes de taxis de Nueva York ("NYC Yellow Taxi") en formato **CSV**.

El equipo de Business Intelligence (BI) necesita ejecutar consultas SQL frecuentes sobre estos datos para analizar tendencias de tráfico y ganancias.

**El Problema:**
Actualmente, los analistas consultan directamente los archivos CSV crudos. El departamento financiero ha notado que los costos de **Amazon Athena** están subiendo demasiado.

**Su Misión:**
Usted propone implementar un proceso de ETL con **AWS Glue** para transformar los datos a formato **Parquet** (columnar y comprimido). Debe utilizar la *AWS Pricing Calculator* para demostrarle a la gerencia que, aunque pagar por Glue implica un costo inicial, el ahorro a largo plazo en las consultas de Athena justifica la inversión.

---

## 2. Datos Técnicos para la Estimación

Utilice los siguientes volúmenes y métricas para alimentar la calculadora:

### A. Almacenamiento (Amazon S3)
* **Datos Crudos (CSV):** . Mira el tamaño de los datos en Shared
* **Datos Optimizados (Parquet):** (Ratio de compresión aprox. 5:1). Estima el tamaño de lso datos en parquet
* **Transacciones:** 10,000 solicitudes PUT/COPY (Carga de datos).

### B. Procesamiento ETL (AWS Glue)
* **Tarea:** Convertir CSV a Parquet.
* **Recurso:** Glue Job (Apache Spark).
* **Capacidad de Cómputo:** 10 DPUs (Worker Type G.1X).
* **Duración:** 20 minutos por ejecución.
* **Frecuencia:** 1 vez al mes (Carga batch histórica).

### C. Patrón de Consumo (Amazon Athena)
* **Frecuencia de consultas:** El equipo de BI ejecuta **100 consultas al mes**.
* **Escenario A (Ineficiente):** Cada consulta escanea el dataset completo en CSV 
* **Escenario B (Optimizado):** Cada consulta escanea solo las columnas necesarias en Parquet

---

## 3. Instrucciones Paso a Paso

### Paso 1: Configuración Inicial
1.  Vaya a [calculator.aws](https://calculator.aws/) y haga clic en **Create estimate**.
2.  Seleccione la región **US East (N. Virginia)**.
3.  Nombre la estimación: `Proyecto Optimización NYC Taxi`.

### Paso 2: Estimación de Almacenamiento (S3)
Agregue el servicio **Amazon S3** para almacenar tanto los datos crudos como los procesados.

* **S3 Standard storage:** 
* **PUT/COPY/POST/LIST requests:** `10,000`.
* **GET/SELECT and all other requests:** `100,000`.
* *Nota:* Observe el costo mensual (debería ser muy bajo).

### Paso 3: Costo de Inversión (AWS Glue)
Agregue el servicio **AWS Glue** para calcular cuánto cuesta limpiar los datos.

* Busque y configure **AWS Glue**.
* En la sección **Jobs**:
    * **Type:** Apache Spark (Glue Version 3.0 or later).
    * **Number of DPUs:** `10`.
    * **Duration of each run:** `20` Minutes.
    * **Frequency:** `1` per month (simulando una carga batch).
* *Tome nota del costo de procesamiento.*

### Paso 4: Comparativa de Consultas (Amazon Athena)
Agregue el servicio **Amazon Athena** dos veces para comparar el "antes" y el "después".

**Grupo 1: Escenario CSV (Actual)**
* Agregue **Amazon Athena**.
* Descripción: `Consultas sobre CSV`.
* **Amount of data scanned per query:** (Athena debe leer todo el archivo porque CSV no es columnar).
* **Queries per month:** `100`.

**Grupo 2: Escenario Parquet (Propuesta)**
* Agregue **Amazon Athena** nuevamente.
* Descripción: `Consultas sobre Parquet`.
* **Amount of data scanned per query:** (Athena usa "Partition Pruning" y lectura columnar, leyendo solo una fracción de los datos).
* **Queries per month:** `100`.

---

## 4. Análisis y Entregable

### Preguntas de Discusión
1.  ¿Cuál es el costo mensual de ejecutar las 100 consultas sobre los CSV?
2.  ¿Cuál es el costo mensual de ejecutar las mismas consultas sobre Parquet?
3.  ¿Cuánto cuesta el trabajo de Glue?
4.  **ROI:** ¿En cuánto tiempo se recupera la inversión de pagar por Glue gracias a los ahorros en Athena?

### Entregable del Estudiante
Genere el enlace público de su estimación y responda:

> **"Actualmente gastamos $______ USD en consultas. Si implementamos la solución con Glue, el costo de consultas bajará a $______ USD. El costo de procesamiento es de solo $______ USD, por lo que la optimización es (Viable / No Viable)."**

---

**Recursos Adicionales:**
* [Laboratorio de referencia: NYC Taxi Data](https://catalog.us-east-1.prod.workshops.aws/workshops/276faf92-bffc-4843-8a8e-8078add48194/en-US)
* [Precios de Amazon Athena](https://aws.amazon.com/athena/pricing/)